// @license
// Baidu Music Player: 0.9.0
// -------------------------
// (c) 2014 FE Team of Baidu Music
// Can be freely distributed under the MIT license.
(function(t,e){if(typeof t._mu==="undefined"){t._mu={}}if(typeof exports==="object"){return module.exports=e()}else if(typeof define==="function"&&define.amd){return define("muplayer/core/cfg",e)}else{return t._mu.cfg=e()}})(this,function(){var t;t=this;return $.extend({namespace:t._mu,debug:false,version:"0.9.0",timerResolution:25,emptyMP3:"../dist/mp3/empty.mp3",expressInstaller:"./dist/expressInstall.swf",engine:{TYPES:{FLASH_MP3:"FlashMP3Core",FLASH_MP4:"FlashMP4Core",AUDIO:"AudioCore"},EVENTS:{STATECHANGE:"engine:statechange",POSITIONCHANGE:"engine:postionchange",PROGRESS:"engine:progress",ERROR:"engine:error",INIT:"engine:init",INIT_FAIL:"engine:init_fail"},STATES:{NOT_INIT:"not_init",PREBUFFER:"prebuffer",BUFFERING:"buffering",PLAYING:"playing",PAUSE:"pause",STOP:"stop",END:"ended"},ERRCODE:{MEDIA_ERR_ABORTED:"1",MEDIA_ERR_NETWORK:"2",MEDIA_ERR_DECODE:"3",MEDIA_ERR_SRC_NOT_SUPPORTED:"4"}}},typeof t._mu==="undefined"?{}:t._mu.cfg)});(function(t,e){if(typeof exports==="object"){return module.exports=e()}else if(typeof define==="function"&&define.amd){return define("muplayer/core/utils",["muplayer/core/cfg"],e)}else{return t._mu.utils=e(t._mu.cfg)}})(this,function(t){var e,n,r,i,o,s,u,a,f,p,l,c;f={};i=String.prototype;n=Number.prototype;r=Object.prototype;e=Array.prototype;u=e.push;o=r.hasOwnProperty;a=r.toString;c=["Arguments","Function","String","Number","Date","RegExp"];for(p=0,l=c.length;p<l;p++){s=c[p];f["is"+s]=function(t){return function(e){return a.call(e)==="[object "+t+"]"}}(s)}if(!$.isFunction(i.startsWith)){i=function(t){return this.slice(0,t.length)===t}}if(!$.isFunction(i.endsWith)){i=function(t){return this.slice(-t.length)===t}}n.toFixed=function(t){var e,n,r;r=Math.pow(10,t);e=(Math.round(this*r)/r).toString();if(t===0){return e}if(e.indexOf(".")<0){e+="."}n=t+1-(e.length-e.indexOf("."));while(n--){e+="0"}return e};$.extend(f,{isEmpty:function(t){var e,n,r;if(t==null){return true}if($.isArray(t)||this.isString(t)){return t.length===0}for(n=0,r=t.length;n<r;n++){e=t[n];if(this.has(t,e)){return false}}return true},isBoolean:function(t){return t===true||t===false||a.call(t)==="[object Boolean]"},has:function(t,e){return o.call(t,e)},random:function(t,e){if(!e){e=t;t=0}return t+Math.floor(Math.random()*(e-t+1))},shuffle:function(t){var e,n,r,i,o,s;e=0;i=[];for(o=0,s=t.length;o<s;o++){n=t[o];r=this.random(e++);i[e-1]=i[r];i[r]=n}return i},clone:function(t){if(!$.isPlainObject(t)){t}if($.isArray(t)){return t.slice()}else{return $.extend({},t)}},time2str:function(t){var e,n,r,i,o,s;o=[];e=Math.floor;t=Math.round(t);n=e(t/3600);r=e((t-3600*n)/60);s=t%60;i=function(t){return function(t,e){var n,r,i;r="";n="";if(t<0){n="-"}i=String(Math.abs(t));if(i.length<e){r=new Array(e-i.length+1).join("0")}return n+r+i}}(this);if(n){o.push(n)}o.push(i(r,2));o.push(i(s,2));return o.join(":")},namespace:function(){var e,n,r,i,o,s,u,a,f,p;e=arguments;u=".";for(a=0,f=e.length;a<f;a++){n=e[a];s=t.namespace;if(n.indexOf(u)>-1){r=n.split(u);p=[0,r.length],i=p[0],o=p[1];while(i<o){s[r[i]]=s[r[i]]||{};s=s[r[i]];i++}}else{s[n]=s[n]||{};s=s[n]}}return s},wrap:function(t,e){return function(){var n;n=[t];u.apply(n,arguments);return e.apply(this,n)}},toAbsoluteUrl:function(t){var e;e=document.createElement("div");e.innerHTML="<a></a>";e.firstChild.href=t;e.innerHTML=e.innerHTML;return e.firstChild.href}});return f});(function(t,e){if(typeof exports==="object"){module.exports=e()}else if(typeof define==="function"&&define.amd){define("muplayer/lib/events",e)}else{t._mu.Events=e()}})(this,function(){var t=/\s+/;function e(){}e.prototype.on=function(e,n,r){var i,o,s;if(!n)return this;i=this.__events||(this.__events={});e=e.split(t);while(o=e.shift()){s=i[o]||(i[o]=[]);s.push(n,r)}return this};e.prototype.once=function(t,e,n){var r=this;var i=function(){r.off(t,i);e.apply(this,arguments)};this.on(t,i,n)};e.prototype.off=function(e,r,i){var o,s,u,a;if(!(o=this.__events))return this;if(!(e||r||i)){delete this.__events;return this}e=e?e.split(t):n(o);while(s=e.shift()){u=o[s];if(!u)continue;if(!(r||i)){delete o[s];continue}for(a=u.length-2;a>=0;a-=2){if(!(r&&u[a]!==r||i&&u[a+1]!==i)){u.splice(a,2)}}}return this};e.prototype.trigger=function(e){var n,i,o,s,u,a,f=[],p,l=true;if(!(n=this.__events))return this;e=e.split(t);for(u=1,a=arguments.length;u<a;u++){f[u-1]=arguments[u]}while(i=e.shift()){if(o=n.all)o=o.slice();if(s=n[i])s=s.slice();l=r(s,f,this)&&l;l=r(o,[i].concat(f),this)&&l}return l};e.prototype.emit=e.prototype.trigger;e.mixTo=function(t){t=i(t)?t.prototype:t;var n=e.prototype;for(var r in n){if(n.hasOwnProperty(r)){t[r]=n[r]}}};var n=Object.keys;if(!n){n=function(t){var e=[];for(var n in t){if(t.hasOwnProperty(n)){e.push(n)}}return e}}function r(t,e,n){if(t){var r=0,i=t.length,o=e[0],s=e[1],u=e[2],a=true;switch(e.length){case 0:for(;r<i;r+=2){a=t[r].call(t[r+1]||n)!==false&&a}break;case 1:for(;r<i;r+=2){a=t[r].call(t[r+1]||n,o)!==false&&a}break;case 2:for(;r<i;r+=2){a=t[r].call(t[r+1]||n,o,s)!==false&&a}break;case 3:for(;r<i;r+=2){a=t[r].call(t[r+1]||n,o,s,u)!==false&&a}break;default:for(;r<i;r+=2){a=t[r].apply(t[r+1]||n,e)!==false&&a}break}}return a}function i(t){return Object.prototype.toString.call(t)==="[object Function]"}return e});var __indexOf=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++){if(e in this&&this[e]===t)return e}return-1};(function(t,e){if(typeof exports==="object"){return module.exports=e()}else if(typeof define==="function"&&define.amd){return define("muplayer/core/playlist",["muplayer/core/utils","muplayer/lib/events"],e)}else{return t._mu.Playlist=e(_mu.utils,_mu.Events)}})(this,function(t,e){var n;n=function(){function e(t){this.opts=$.extend({},this.defaults,t);this.reset()}e.prototype.reset=function(){this.cur="";if($.isArray(this.list)){return this.list.length=0}else{return this.list=[]}};e.prototype._resetListRandom=function(e){var n,r,i;if(this.mode==="list-random"){e=e||0;this._listRandomIndex=e;this._listRandom=t.shuffle(function(){i=[];for(var t=0,e=this.list.length;0<=e?t<e:t>e;0<=e?t++:t--){i.push(t)}return i}.apply(this));return this.cur=this.list[this._listRandom[e]]}};e.prototype._formatSid=function(e){var n,r,i;n=this.opts.absoluteUrl;r=function(e){return n&&t.toAbsoluteUrl(e)||""+e};return $.isArray(e)&&function(){var t,n,o;o=[];for(t=0,n=e.length;t<n;t++){i=e[t];if(i){o.push(r(i))}}return o}()||r(e)};e.prototype.setMode=function(t){if(t==="single"||t==="random"||t==="list-random"||t==="list"||t==="loop"){this.mode=t}return this._resetListRandom()};e.prototype.add=function(t){t=this._formatSid(t);this.remove(t);if($.isArray(t)&&t.length){this.list=t.concat(this.list)}else if(t){this.list.unshift(t)}this.trigger("playlist:add",t);return this._resetListRandom()};e.prototype.remove=function(t){var e,n,r,i;n=function(t){return function(e){var n;n=$.inArray(e,t.list);if(n!==-1){return t.list.splice(n,1)}}}(this);t=this._formatSid(t);if($.isArray(t)){for(r=0,i=t.length;r<i;r++){e=t[r];n(e)}}else{n(t)}this.trigger("playlist:remove",t);return this._resetListRandom()};e.prototype.prev=function(){var e,n,r,i;r=this.list;e=$.inArray(this.cur,r);n=r.length;i=e-1;switch(this.mode){case"single":i=e;break;case"random":i=t.random(0,n-1);break;case"list":if(e=0){this.cur=r[0];return false}break;case"list-random":e=this._listRandomIndex--;i=e-1;if(e===0){i=n-1;this._resetListRandom(i)}return this.cur=r[this._listRandom[i]];case"loop":if(e===0){i=n-1}}return this.cur=r[i]};e.prototype.next=function(){var e,n,r,i;r=this.list;e=$.inArray(this.cur,r);n=r.length;i=e+1;switch(this.mode){case"single":i=e;break;case"random":i=t.random(0,n-1);break;case"list":if(e===n-1){this.cur=r[0];return false}break;case"list-random":e=this._listRandomIndex++;i=e+1;if(e===n-1){i=0;this._resetListRandom(i)}return this.cur=r[this._listRandom[i]];case"loop":if(e===n-1){i=0}}return this.cur=r[i]};e.prototype.setCur=function(t){t=t+"";if(__indexOf.call(this.list,t)<0){this.add(t)}return this.cur=""+t};return e}();e.mixTo(n);return n});var __indexOf=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++){if(e in this&&this[e]===t)return e}return-1};(function(t,e){if(typeof exports==="object"){return module.exports=e()}else if(typeof define==="function"&&define.amd){return define("muplayer/core/engines/engineCore",["muplayer/core/cfg","muplayer/core/utils","muplayer/lib/events"],e)}else{return t._mu.EngineCore=e(_mu.cfg,_mu.utils,_mu.Events)}})(this,function(t,e,n){var r,i,o,s,u,a,f;f=t.engine,r=f.EVENTS,o=f.STATES;s=function(){var t;t=[];for(u in o){a=o[u];t.push(a)}return t}();i=function(){function t(){}t.prototype._supportedTypes=[];t.prototype.getSupportedTypes=function(){return this._supportedTypes};t.prototype.canPlayType=function(t){return $.inArray(t,this.getSupportedTypes())!==-1};t.prototype.reset=function(){this.stop();return this.setUrl()};t.prototype.play=function(){return this};t.prototype.pause=function(){return this};t.prototype.stop=function(){return this};t.prototype.setUrl=function(t){if(t==null){t=""}this._url=t;return this};t.prototype.getUrl=function(){return this._url};t.prototype.setState=function(t){var e;if(__indexOf.call(s,t)>=0&&t!==this._state){e=this._state;this._state=t;return this.trigger(r.STATECHANGE,{oldState:e,newState:t})}};t.prototype.getState=function(){return this._state};t.prototype.setVolume=function(t){this._volume=t;return this};t.prototype.getVolume=function(){return this._volume};t.prototype.setMute=function(t){this._mute=t;return this};t.prototype.getMute=function(){return this._mute};t.prototype.setCurrentPosition=function(t){return this};t.prototype.getCurrentPosition=function(){return 0};t.prototype.getLoadedPercent=function(){return 0};t.prototype.getTotalTime=function(){return 0};return t}();n.mixTo(i);return i});(function(t,e){if(typeof exports==="object"){module.exports=e()}else if(typeof define==="function"&&define.amd){define("muplayer/lib/modernizr.audio",e)}else{t._mu.Modernizr=e()}})(this,function(){return function(t,e,n){var r="2.7.1",i={},o=e.documentElement,s="modernizr",u=e.createElement(s),a=u.style,f,p={}.toString,l={},c={},h={},g=[],y=g.slice,d,m={}.hasOwnProperty,_;if(!T(m,"undefined")&&!T(m.call,"undefined")){_=function(t,e){return m.call(t,e)}}else{_=function(t,e){return e in t&&T(t.constructor.prototype[e],"undefined")}}if(!Function.prototype.bind){Function.prototype.bind=function w(t){var e=this;if(typeof e!="function"){throw new TypeError}var n=y.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=e.prototype;var o=new i;var s=e.apply(o,n.concat(y.call(arguments)));if(Object(s)===s){return s}return o}else{return e.apply(t,n.concat(y.call(arguments)))}};return r}}function E(t){a.cssText=t}function v(t,e){return E(prefixes.join(t+";")+(e||""))}function T(t,e){return typeof t===e}function S(t,e){return!!~(""+t).indexOf(e)}function P(t,e,r){for(var i in t){var o=e[t[i]];if(o!==n){if(r===false)return t[i];if(T(o,"function")){return o.bind(r||e)}return o}}return false}l["audio"]=function(){var t=e.createElement("audio"),n=false;try{if(n=!!t.canPlayType){n=new Boolean(n);n.ogg=t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"");n.mp3=t.canPlayType("audio/mpeg;").replace(/^no$/,"");n.wav=t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"");n.m4a=(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,"")}}catch(r){}return n};for(var C in l){if(_(l,C)){d=C.toLowerCase();i[d]=l[C]();g.push((i[d]?"":"no-")+d)}}i.addTest=function(t,e){if(typeof t=="object"){for(var r in t){if(_(t,r)){i.addTest(r,t[r])}}}else{t=t.toLowerCase();if(i[t]!==n){return i}e=typeof e=="function"?e():e;if(typeof enableClasses!=="undefined"&&enableClasses){o.className+=" "+(e?"":"no-")+t}i[t]=e}return i};E("");u=f=null;i._version=r;return i}(this,this.document)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){for(var n in e){if(__hasProp.call(e,n))t[n]=e[n]}function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r;t.__super__=e.prototype;return t},__slice=[].slice;(function(t,e){if(typeof exports==="object"){return module.exports=e()}else if(typeof define==="function"&&define.amd){return define("muplayer/core/engines/audioCore",["muplayer/core/cfg","muplayer/core/utils","muplayer/core/engines/engineCore","muplayer/lib/modernizr.audio"],e)}else{return t._mu.AudioCore=e(_mu.cfg,_mu.utils,_mu.EngineCore,_mu.Modernizr)}})(this,function(t,e,n,r){var i,o,s,u,a,f,p;f=window;p=t.engine,a=p.TYPES,s=p.EVENTS,u=p.STATES,o=p.ERRCODE;i=function(n){__extends(i,n);i.defaults={confidence:"maybe",preload:false,autoplay:false,emptyMP3:t.emptyMP3};i.prototype._supportedTypes=[];i.prototype.engineType=a.AUDIO;function i(t){var e,n,o,s,u,a,p;this.opts=u=$.extend(i.defaults,t);s={"":0,maybe:1,probably:2};o=s[u.confidence];e=r.audio;if(!e){return this}for(n in e){p=e[n];if(s[p]>=o){this._supportedTypes.push(n)}}e=new Audio;e.preload=u.preload;e.autoplay=u.autoplay;e.loop=false;e.on=function(t){return function(t,n){e.addEventListener(t,n,false);return e}}(this);e.off=function(t){return function(t,n){e.removeEventListener(t,n,false);return e}}(this);this.audio=e;this._needCanPlay(["play","setCurrentPosition"]);this._initEvents();a=function(t){return function(){t.setUrl(u.emptyMP3).play();return f.removeEventListener("touchstart",a,false)}}(this);f.addEventListener("touchstart",a,false)}i.prototype._test=function(t){if(r.audio===false||this._supportedTypes.length===0){return false}t&&this.trigger(s.INIT_FAIL,this.engineType);return true};i.prototype._initEvents=function(){var t,e,n;n=this.trigger;this.trigger=function(t){return function(e,r){if(t.getUrl()!==t.opts.emptyMP3){return n.call(t,e,r)}}}(this);t=function(t){return function(e){t.setState(u.BUFFERING);return t.trigger(s.PROGRESS,e||t.getLoadedPercent())}}(this);e=null;return this.audio.on("loadstart",function(n){return function(){var r;r=n.audio;e=setInterval(function(){if(r.readyState>1){return clearInterval(e)}return t()},50);return n.setState(u.PREBUFFER)}}(this)).on("playing",function(t){return function(){return t.setState(u.PLAYING)}}(this)).on("pause",function(t){return function(){return t.setState(t.getCurrentPosition()&&u.PAUSE||u.STOP)}}(this)).on("ended",function(t){return function(){return t.setState(u.END)}}(this)).on("error",function(t){return function(){t.setState(u.END);return t.trigger(s.ERROR,o.MEDIA_ERR_NETWORK)}}(this)).on("waiting",function(t){return function(){return t.setState(t.getCurrentPosition()&&u.BUFFERING||u.PREBUFFER)}}(this)).on("timeupdate",function(t){return function(){return t.trigger(s.POSITIONCHANGE,t.getCurrentPosition())}}(this)).on("progress",function(n){var r,i;clearInterval(e);r=n.loaded||0;i=n.total||1;return t(r&&(r/i).toFixed(2)*1)})};i.prototype._needCanPlay=function(t){var n,r,i,o,s;n=this.audio;s=[];for(i=0,o=t.length;i<o;i++){r=t[i];s.push(this[r]=e.wrap(this[r],function(t){return function(){var e,r,i;r=arguments[0],e=2<=arguments.length?__slice.call(arguments,1):[];if(n.readyState<3){i=function(){r.apply(t,e);return n.off("canplay",i)};n.on("canplay",i)}else{r.apply(t,e)}return t}}(this)))}return s};i.prototype.play=function(){this.audio.play();return this};i.prototype.pause=function(){this.audio.pause();return this};i.prototype.stop=function(){try{this.audio.currentTime=0}catch(t){}finally{this.pause()}return this};i.prototype.setUrl=function(t){if(t==null){t=""}this.audio.src=t;this.audio.load();return i.__super__.setUrl.call(this,t)};i.prototype.setVolume=function(t){if(!(0<=t&&t<=100)){this}this.audio.volume=t/100;return i.__super__.setVolume.call(this,t)};i.prototype.setMute=function(t){t=!!t;this.audio.muted=t;return i.__super__.setMute.call(this,t)};i.prototype.setCurrentPosition=function(t){try{this.audio.currentTime=t/1e3}catch(e){}finally{this.play()}return this};i.prototype.getCurrentPosition=function(){return this.audio.currentTime*1e3};i.prototype.getLoadedPercent=function(){var t,e,n,r,i,o;t=this.audio;i=t.duration;r=t.buffered;n=r.length;e=0;while(n--){if(r.start(n)<=(o=t.currentTime)&&o<=r.end(n)){e=r.end(n);break}}e=e>i?i:e;return i&&(e/i).toFixed(2)*1||0};i.prototype.getTotalTime=function(){var t;t=this.audio.duration;return t&&t*1e3||0};return i}(n);return i});(function(t,e){if(typeof exports==="object"){module.exports=e()}else if(typeof define==="function"&&define.amd){define("muplayer/lib/Timer",e)}else{t._mu.Timer=e()}})(this,function(){function t(t){if(typeof t==="string"){if(isNaN(parseInt(t,10))){t="1"+t}var e=t.replace(/[^a-z0-9\.]/g,"").match(/(?:(\d+(?:\.\d+)?)(?:days?|d))?(?:(\d+(?:\.\d+)?)(?:hours?|hrs?|h))?(?:(\d+(?:\.\d+)?)(?:minutes?|mins?|m\b))?(?:(\d+(?:\.\d+)?)(?:seconds?|secs?|s))?(?:(\d+(?:\.\d+)?)(?:milliseconds?|ms))?/);if(e[0]){return parseFloat(e[1]||0)*864e5+parseFloat(e[2]||0)*36e5+parseFloat(e[3]||0)*6e4+parseFloat(e[4]||0)*1e3+parseInt(e[5]||0,10)}if(!isNaN(parseInt(t,10))){return parseInt(t,10)}}if(typeof t==="number"){return t}return 0}function e(t,e){return parseInt(t/e,10)||1}function n(e){if(this instanceof n===false){return new n(e)}this._notifications=[];this._resolution=t(e)||1e3;this._running=false;this._ticks=0;this._timer=null;this._drift=0}n.prototype={start:function(){var t=this;if(!this._running){this._running=!this._running;setTimeout(function e(){t._ticks++;for(var n=0,r=t._notifications.length;n<r;n++){if(t._notifications[n]&&t._ticks%t._notifications[n].ticks===0){t._notifications[n].callback.call(t._notifications[n],{ticks:t._ticks,resolution:t._resolution})}}if(t._running){t._timer=setTimeout(e,t._resolution+t._drift);t._drift=0}},this._resolution)}return this},stop:function(){if(this._running){this._running=!this._running;clearTimeout(this._timer)}return this},reset:function(){this.stop();this._ticks=0;return this},clear:function(){this.reset();this._notifications=[];return this},ticks:function(){return this._ticks},resolution:function(){return this._resolution},running:function(){return this._running},bind:function(n,r){if(n&&r){var i=e(t(n),this._resolution);this._notifications.push({ticks:i,callback:r})}return this},unbind:function(t){if(!t){this._notifications=[]}else{for(var e=0,n=this._notifications.length;e<n;e++){if(this._notifications[e]&&this._notifications[e].callback===t){this._notifications.splice(e,1)}}}return this},drift:function(t){this._drift=t;return this}};n.prototype.every=n.prototype.bind;n.prototype.after=function(t,e){var r=this;n.prototype.bind.call(r,t,function i(){n.prototype.unbind.call(r,i);e.apply(this,arguments)});return this};return n});(function(t,e){if(typeof exports==="object"){module.exports=e()}else if(typeof define==="function"&&define.amd){define("muplayer/lib/jquery.swfobject",e)}else{e()}})(this,function(){(function(t,e,n){var r="object",i=true;function o(t,e){var n=(t[0]||0)-(e[0]||0);return n>0||!n&&t.length>0&&o(t.slice(1),e.slice(1))}function s(t){if(typeof t!=r){return t}var e=[],n="";for(var o in t){if(typeof t[o]==r){n=s(t[o])}else{n=[o,i?encodeURI(t[o]):t[o]].join("=")}e.push(n)}return e.join("&")}function u(t){var e=[];for(var n in t){if(t[n]){e.push([n,'="',t[n],'"'].join(""))}}return e.join(" ")}function a(t){var e=[];for(var n in t){e.push(['<param name="',n,'" value="',s(t[n]),'" />'].join(""))}return e.join("")}try{var f=n.description||function(){return new n("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}()}catch(p){f="Unavailable"}var l=f.match(/\d+/g)||[0];t[e]={available:l[0]>0,activeX:n&&!n.name,version:{original:f,array:l,string:l.join("."),major:parseInt(l[0],10)||0,minor:parseInt(l[1],10)||0,release:parseInt(l[2],10)||0},hasVersion:function(t){var e=/string|number/.test(typeof t)?t.toString().split("."):/object/.test(typeof t)?[t.major,t.minor]:t||[0,0];return o(l,e)},encodeParams:true,expressInstall:"expressInstall.swf",expressInstallIsActive:false,create:function(t){var e=this;if(!t.swf||e.expressInstallIsActive||!e.available&&!t.hasVersionFail){return false}if(!e.hasVersion(t.hasVersion||1)){e.expressInstallIsActive=true;if(typeof t.hasVersionFail=="function"){if(!t.hasVersionFail.apply(t)){return false}}t={swf:t.expressInstall||e.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:e.activeX?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}attrs={data:t.swf,type:"application/x-shockwave-flash",id:t.id||"flash_"+Math.floor(Math.random()*999999999),width:t.width||320,height:t.height||180,style:t.style||""};i=typeof t.useEncode!=="undefined"?t.useEncode:e.encodeParams;t.movie=t.swf;t.wmode=t.wmode||"opaque";delete t.fallback;delete t.hasVersion;delete t.hasVersionFail;delete t.height;delete t.id;delete t.swf;delete t.useEncode;delete t.width;var n=document.createElement("div");n.innerHTML=["<object ",u(attrs),">",a(t),"</object>"].join("");return n.firstChild}};t.fn[e]=function(n){var i=this.find(r).andSelf().filter(r);if(/string|object/.test(typeof n)){this.each(function(){var i=t(this),o;n=typeof n==r?n:{swf:n};n.fallback=this;o=t[e].create(n);if(o){i.children().remove();i.html(o)}})}if(typeof n=="function"){i.each(function(){var r=this,i="jsInteractionTimeoutMs";r[i]=r[i]||0;if(r[i]<660){if(r.clientWidth||r.clientHeight){n.call(r)}else{setTimeout(function(){t(r)[e](n)},r[i]+66)}}})}return i}})(jQuery,"flash",navigator.plugins["Shockwave Flash"]||window.ActiveXObject)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){for(var n in e){if(__hasProp.call(e,n))t[n]=e[n]}function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r;t.__super__=e.prototype;return t},__slice=[].slice;(function(t,e){if(typeof exports==="object"){return module.exports=e()}else if(typeof define==="function"&&define.amd){return define("muplayer/core/engines/flashCore",["muplayer/core/cfg","muplayer/core/utils","muplayer/lib/Timer","muplayer/core/engines/engineCore","muplayer/lib/jquery.swfobject"],e)}else{return t._mu.FlashCore=e(_mu.cfg,_mu.utils,_mu.Timer,_mu.EngineCore)}})(this,function(t,e,n,r){var i,o,s,u,a,f,p;p=t.engine,o=p.EVENTS,u=p.STATES,i=p.ERRCODE;f=t.timerResolution;a={"-1":u.NOT_INIT,1:u.PREBUFFER,2:u.BUFFERING,3:u.PLAYING,4:u.PAUSE,5:u.STOP,6:u.END};s=function(r){__extends(s,r);function s(n){var r,i,o;this.opts=o=$.extend({},this.defaults,n);this._loaded=false;this._queue=[];this._needFlashReady(["play","pause","stop","setCurrentPosition","_setUrl","_setVolume","_setMute"]);this._unexceptionGet(["getCurrentPosition","getLoadedPercent","getTotalTime"]);r="muplayer_"+setTimeout(function(){},0);i=o.instanceName+"_"+r;e.namespace("engines")[i]=this;i="_mu.engines."+i;this.flash=$.flash.create({swf:o.swf,id:r,height:1,width:1,allowscriptaccess:"always",wmode:"transparent",expressInstaller:o.expressInstaller||t.expressInstaller,flashvars:{_instanceName:i,_buffertime:5e3}});o.$el.append(this.flash);this._initEvents()}s.prototype._test=function(t){var e;e=this.opts;if(!$.flash.hasVersion(e.flashVer)){return false}t&&this.trigger(o.INITFAIL,this.engineType);return true};s.prototype._initEvents=function(){var t,e;this.progressTimer=new n(f);this.positionTimer=new n(f);e=function(t){return function(){var e;e=t.getLoadedPercent();if(t._lastPer!==e){t._lastPer=e;t.trigger(o.PROGRESS,e)}if(e===1){return t.progressTimer.stop()}}}(this);t=function(t){return function(){var e;e=t.getCurrentPosition();if(t._lastPos!==e){t._lastPos=e;return t.trigger(o.POSITIONCHANGE,e)}}}(this);this.progressTimer.every("100 ms",e);this.positionTimer.every("100 ms",t);return this.on(o.STATECHANGE,function(e){return function(n){var r;r=n.newState;switch(r){case u.PREBUFFER:case u.PLAYING:e.progressTimer.start();break;case u.PAUSE:case u.STOP:e.progressTimer.stop();break;case u.END:e.progressTimer.reset()}switch(r){case u.PLAYING:return e.positionTimer.start();case u.PAUSE:case u.STOP:e.positionTimer.stop();return t();case u.END:return e.positionTimer.reset()}}}(this))};s.prototype._needFlashReady=function(t){var n,r,i,o;o=[];for(r=0,i=t.length;r<i;r++){n=t[r];o.push(this[n]=e.wrap(this[n],function(t){return function(){var e,n;n=arguments[0],e=2<=arguments.length?__slice.call(arguments,1):[];if(t._loaded){n.apply(t,e)}else{t._pushQueue(n,e)}return t}}(this)))}return o};s.prototype._unexceptionGet=function(t){var n,r,i,o;o=[];for(r=0,i=t.length;r<i;r++){n=t[r];o.push(this[n]=e.wrap(this[n],function(t){return function(){var e,n;n=arguments[0],e=2<=arguments.length?__slice.call(arguments,1):[];try{return n.apply(t,e)}catch(r){return 0}}}(this)))}return o};s.prototype._pushQueue=function(t,e){return this._queue.push([t,e])};s.prototype._fireQueue=function(){var t,e,n,r;r=[];while(this._queue.length){n=this._queue.shift(),e=n[0],t=n[1];r.push(e.apply(this,t))}return r};s.prototype.reset=function(){s.__super__.reset.call(this);this.setMute(this.getMute());return this.setVolume(this.getVolume())};s.prototype.play=function(){this.flash.play();return this};s.prototype.pause=function(){this.flash.pause();return this};s.prototype.stop=function(){this.flash.stop();return this};s.prototype._setUrl=function(t){return this.flash.load(t)};s.prototype.setUrl=function(t){if(t){this._setUrl(t);(function(t){return function(){var e,n;n=null;e=function(r){if(r.newState===u.PLAYING&&r.oldState===u.PREBUFFER){return n=setTimeout(function(){t.off(o.STATECHANGE,e);if(t.getCurrentPosition()<100){t.setState(u.END);return t.trigger(o.ERROR,i.MEDIA_ERR_SRC_NOT_SUPPORTED)}},2e3)}else{return clearTimeout(n)}};return t.off(o.STATECHANGE,e).on(o.STATECHANGE,e)}})(this)()}return s.__super__.setUrl.call(this,t)};s.prototype.getState=function(t){return a[t]||this._state};s.prototype._setVolume=function(t){return this.flash.setData("volume",t)};s.prototype.setVolume=function(t){if(!(0<=t&&t<=100)){this}this._setVolume(t);return s.__super__.setVolume.call(this,t)};s.prototype._setMute=function(t){return this.flash.setData("mute",t)};s.prototype.setMute=function(t){t=!!t;this._setMute(t);return s.__super__.setMute.call(this,t)};s.prototype.setCurrentPosition=function(t){this.flash.play(t);return this};s.prototype.getCurrentPosition=function(){return this.flash.getData("position")};s.prototype.getLoadedPercent=function(){return this.flash.getData("loadedPct")};s.prototype.getTotalTime=function(){return this.flash.getData("length")};s.prototype._swfOnLoad=function(){this._loaded=true;return setTimeout(function(t){return function(){return t._fireQueue()}}(this),0)};s.prototype._swfOnStateChange=function(t){return this.setState(this.getState(t))};s.prototype._swfOnErr=function(t){return typeof console!=="undefined"&&console!==null?console.error(t):void 0};return s}(r);return s});var __hasProp={}.hasOwnProperty,__extends=function(t,e){for(var n in e){if(__hasProp.call(e,n))t[n]=e[n]}function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r;t.__super__=e.prototype;return t};(function(t,e){if(typeof exports==="object"){return module.exports=e()}else if(typeof define==="function"&&define.amd){return define("muplayer/core/engines/flashMP3Core",["muplayer/core/cfg","muplayer/core/engines/flashCore"],e)}else{return t._mu.FlashMP3Core=e(_mu.cfg,_mu.FlashCore)}})(this,function(t,e){var n,r;r=t.engine.TYPES;n=function(t){__extends(e,t);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.defaults={swf:"./dist/muplayer_mp3.swf",instanceName:"MP3Core",flashVer:"9.0.0"};e.prototype._supportedTypes=["mp3"];e.prototype.engineType=r.FLASH_MP3;return e}(e);return n});var __hasProp={}.hasOwnProperty,__extends=function(t,e){for(var n in e){if(__hasProp.call(e,n))t[n]=e[n]}function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r;t.__super__=e.prototype;return t};(function(t,e){if(typeof exports==="object"){return module.exports=e()}else if(typeof define==="function"&&define.amd){return define("muplayer/core/engines/flashMP4Core",["muplayer/core/cfg","muplayer/core/engines/flashCore"],e)}else{return t._mu.FlashMP4Core=e(_mu.cfg,_mu.FlashCore)}})(this,function(t,e){var n,r;r=t.engine.TYPES;n=function(t){__extends(e,t);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.defaults={swf:"./dist/muplayer_mp4.swf",instanceName:"MP4Core",flashVer:"9.0.115"};e.prototype._supportedTypes=["m4a"];e.prototype.engineType=r.FLASH_MP4;return e}(e);return n});(function(t,e){if(typeof exports==="object"){return module.exports=e()}else if(typeof define==="function"&&define.amd){return define("muplayer/core/engines/engine",["muplayer/core/cfg","muplayer/core/utils","muplayer/lib/events","muplayer/core/engines/engineCore","muplayer/core/engines/audioCore","muplayer/core/engines/flashMP3Core","muplayer/core/engines/flashMP4Core"],e)}else{return t._mu.Engine=e(_mu.cfg,_mu.utils,_mu.Events,_mu.EngineCore,_mu.AudioCore,_mu.FlashMP3Core,_mu.FlashMP4Core)}})(this,function(cfg,utils,Events,EngineCore,AudioCore,FlashMP3Core,FlashMP4Core){var EVENTS,Engine,STATES,extReg,timerResolution,_ref;_ref=cfg.engine,EVENTS=_ref.EVENTS,STATES=_ref.STATES;timerResolution=cfg.timerResolution;extReg=/\.(\w+)$/;Engine=function(){Engine.el='<div id="muplayer_container_{{DATETIME}}" style="width: 1px; height: 1px; overflow: hidden"></div>';Engine.prototype.defaults={engines:[{constructor:FlashMP3Core},{constructor:FlashMP4Core},{constructor:AudioCore}]};function Engine(t){this.opts=$.extend({},this.defaults,t);this._initEngines()}Engine.prototype._initEngines=function(){var $el,args,constructor,engine,i,_i,_len,_ref1;this.engines=[];$el=$(Engine.el.replace(/{{DATETIME}}/g,+new Date)).appendTo("body");_ref1=this.opts.engines;for(i=_i=0,_len=_ref1.length;_i<_len;i=++_i){engine=_ref1[i];constructor=engine.constructor;args=engine.args||{};args.$el=$el;try{if(!$.isFunction(constructor)){constructor=eval(constructor)}engine=new constructor(args)}catch(_error){throw"Missing constructor: "+String(engine.constructor)}if(engine._test()){this.engines.push(engine)}}if(this.engines.length){return this.setEngine(this.engines[0])}else{return this.setEngine(new EngineCore)}};Engine.prototype.setEngine=function(t){var e,n,r,i,o,s;this._lastE={};o=function(t){return function(e){if(e.oldState===t._lastE.oldState&&e.newState===t._lastE.newState){return}t._lastE={oldState:e.oldState,newState:e.newState};return t.trigger(EVENTS.STATECHANGE,e)}}(this);r=function(t){return function(e){return t.trigger(EVENTS.POSITIONCHANGE,e)}}(this);i=function(t){return function(e){return t.trigger(EVENTS.PROGRESS,e)}}(this);e=function(t){return t.on(EVENTS.STATECHANGE,o).on(EVENTS.POSITIONCHANGE,r).on(EVENTS.PROGRESS,i)};s=function(t){return t.off(EVENTS.STATECHANGE,o).off(EVENTS.POSITIONCHANGE,r).off(EVENTS.PROGRESS,i)};if(!this.curEngine){return this.curEngine=e(t)}else if(this.curEngine!==t){n=this.curEngine;s(n).reset();this.curEngine=e(t);return this.curEngine.setVolume(n.getVolume()).setMute(n.getMute())}};Engine.prototype.canPlayType=function(t){return $.inArray(t,this.getSupportedTypes())!==-1};Engine.prototype.getSupportedTypes=function(){var t,e,n,r,i;e=[];i=this.engines;for(n=0,r=i.length;n<r;n++){t=i[n];e=e.concat(t.getSupportedTypes())}return e};Engine.prototype.switchEngineByType=function(t){var e,n,r,i,o;n=false;o=this.engines;for(r=0,i=o.length;r<i;r++){e=o[r];if(e.canPlayType(t)){this.setEngine(e);n=true;break}}if(!n){return this.setEngine(this.engines[0])}};Engine.prototype.reset=function(){this.curEngine.reset();return this};Engine.prototype.setUrl=function(t){var e;if(extReg.test(t)){e=RegExp.$1}if(this.canPlayType(e)){if(!this.curEngine.canPlayType(e)){this.switchEngineByType(e)}}else{throw"Can not play with: "+e}this.curEngine.setUrl(t);return this};Engine.prototype.getUrl=function(){return this.curEngine.getUrl()};Engine.prototype.play=function(){this.curEngine.play();return this};Engine.prototype.pause=function(){this.curEngine.pause();return this};Engine.prototype.stop=function(){this.curEngine.stop();return this};Engine.prototype.setMute=function(t){if(utils.isBoolean(t)){this.curEngine.setMute(t)}return this};Engine.prototype.getMute=function(){return this.curEngine.getMute()};Engine.prototype.setVolume=function(t){if($.isNumeric(t)&&t>=0&&t<=100){this.curEngine.setVolume(t)
}return this};Engine.prototype.getVolume=function(){return this.curEngine.getVolume()};Engine.prototype.setCurrentPosition=function(t){t=~~t;this.curEngine.setCurrentPosition(t);return this};Engine.prototype.getCurrentPosition=function(){return this.curEngine.getCurrentPosition()};Engine.prototype.getLoadedPercent=function(){return this.curEngine.getLoadedPercent()};Engine.prototype.getTotalTime=function(){return this.curEngine.getTotalTime()};Engine.prototype.getEngineType=function(){return this.curEngine.engineType};Engine.prototype.getState=function(){return this.curEngine.getState()};return Engine}();Events.mixTo(Engine);return Engine});(function(t,e){if(typeof exports==="object"){return module.exports=e()}else if(typeof define==="function"&&define.amd){return define("muplayer/player",["muplayer/core/cfg","muplayer/core/utils","muplayer/lib/events","muplayer/core/playlist","muplayer/core/engines/engine"],e)}else{return t._mu.Player=e(t._mu.cfg,t._mu.utils,t._mu.Events,t._mu.Playlist,t._mu.Engine)}})(this,function(t,e,n,r,i){var o,s,u,a,f;f=t.engine,o=f.EVENTS,u=f.STATES;a=e.time2str;s=function(){var t;t=null;e.prototype.defaults={mode:"loop",mute:false,volume:80,singleton:true,absoluteUrl:true};function e(e){var n;this.opts=n=$.extend({},this.defaults,e);if(n.singleton){if(t){return t}t=this}this.playlist=new r({absoluteUrl:n.absoluteUrl});this.playlist.setMode(n.mode);this._initEngine(new i({engines:n.engines}));this.setMute(n.mute);this.setVolume(n.volume)}e.prototype._initEngine=function(t){return this.engine=t.on(o.STATECHANGE,function(t){return function(e){var n;n=e.newState;t.trigger(n);if(n===u.END){return t.next(true)}}}(this)).on(o.POSITIONCHANGE,function(t){return function(e){return t.trigger("timeupdate",e)}}(this)).on(o.PROGRESS,function(t){return function(e){return t.trigger("progress",e)}}(this))};e.prototype.play=function(t){var e,n,r;t=~~t;e=$.Deferred();n=this.engine;r=function(r){return function(){if(t){n.setCurrentPosition(t)}else{n.play()}r.trigger("player:play",t);return e.resolve()}}(this);this._fetch().done(function(){return r()});return e.promise()};e.prototype.pause=function(){this.engine.pause();this.trigger("player:pause");return this};e.prototype.stop=function(){this.engine.stop();this.trigger("player:stop");return this};e.prototype.replay=function(){return this.stop().play()};e.prototype.prev=function(){var t;t=this.getCur();if(this.getSongsNum()&&this.playlist.prev()){this.trigger("player:prev",{cur:t});return this.play()}return this.stop()};e.prototype.next=function(t){var e;e=this.getCur();if(this.getSongsNum()&&this.playlist.next()){this.trigger("player:next",{auto:t,cur:e});return this.play()}return this.stop()};e.prototype.getCur=function(){var t,e;e=this.playlist;t=e.cur;if(!t&&this.getSongsNum()){t=e.list[0];e.setCur(t)}return t+""};e.prototype.setCur=function(t){var e;e=this.playlist;if(t){e.setCur(t)}else if(this.getSongsNum()){e.setCur(e.list[0])}return this};e.prototype.curPos=function(t){var e;e=this.engine.getCurrentPosition()/1e3;if(t){return a(e)}else{return e}};e.prototype.duration=function(t){var e;e=this.engine.getTotalTime()/1e3;if(t){return a(e)}else{return e}};e.prototype.add=function(t){if(t){this.playlist.add(t)}this.trigger("player:add",t);return this};e.prototype.remove=function(t){if(t){this.playlist.remove(t)}if(!this.getSongsNum()){this.reset()}this.trigger("player:remove",t);return this};e.prototype.reset=function(){this.playlist.reset();this.engine.reset();this.trigger("player:reset");return this};e.prototype.getState=function(){return this.engine.getState()};e.prototype.setUrl=function(t){this.engine.setUrl(t);return this};e.prototype.getUrl=function(){return this.engine.getUrl()};e.prototype.setVolume=function(t){return this.engine.setVolume(t)};e.prototype.getVolume=function(){return this.engine.getVolume()};e.prototype.setMute=function(t){this.engine.setMute(t);return this};e.prototype.getMute=function(){return this.engine.getMute()};e.prototype.canPlayType=function(t){return this.engine.canPlayType(t)};e.prototype.getSongsNum=function(){return this.playlist.list.length};e.prototype.setMode=function(t){this.playlist.setMode(t);return this};e.prototype.getMode=function(){return this.playlist.mode};e.prototype._fetch=function(){var t;t=$.Deferred();if(this.getUrl()===this.getCur()){t.resolve()}else{setTimeout(function(e){return function(){e.setUrl(e.getCur());return t.resolve()}}(this),0)}return t.promise()};return e}();n.mixTo(s);return s});